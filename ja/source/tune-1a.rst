.. _tune-1a:

**************
別解 (tune-1a)
**************

ディレクティブを用いずにほぼ同じ
i-loop
に対するコンパイラ
SIMD
化を実現するには、次のようにループを分割しループの順序を入れ替えるという書き方もあります。コードの変更量は大きくなりますが他に応用の効くかもしれない手法でもありここで紹介しておきます。

.. literalinclude:: ../../cpp/axhelm-1a.cpp
   :language: cpp
   :tab-width: 4
   :lines: 79-
   :linenos:
   :emphasize-lines: 3,9,16,34,40,46
   :caption: axhelm-1a.cpp
   :lineno-match:

i-loop
が
3
分割されその真中のブロックが
m-loop
の内側に入っていること、スカラ変数だった
``qr, qs, qt``
が長さ8の配列に変更されていることに注意してください。

このバージョンでは上述の方法と完全に同一の結果とまではならなかったのですが
**321 GFLOP/s**
が得られています。
